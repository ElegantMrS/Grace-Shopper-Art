{"ast":null,"code":"import _regeneratorRuntime from\"/home/danzan/.nvm/versions/node/v15.6.0/lib/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/danzan/.nvm/versions/node/v15.6.0/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/danzan/.nvm/versions/node/v15.6.0/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Joe, Rob\nimport{Link,useHistory}from\"react-router-dom\";import{useState}from\"react\";import{registerUser}from\"../api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(_ref){var username=_ref.username,setUsername=_ref.setUsername,password=_ref.password,setPassword=_ref.setPassword,userToken=_ref.userToken,setUserToken=_ref.setUserToken,setLoggedIn=_ref.setLoggedIn,loggedIn=_ref.loggedIn;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),passwordConfirmation=_useState2[0],setPasswordConfirmation=_useState2[1];var history=useHistory();var confirmPasswords=function confirmPasswords(event){event.preventDefault();if(password!==passwordConfirmation){alert(\"Passwords do not match\");}else{fetchApi(event);}};var fetchApi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return registerUser(username,password);case 4:data=_context.sent;if(data.error){alert(\"Error Registering User\");}else{token=data.token;localStorage.setItem(\"Token\",token);setUserToken(token);setLoggedIn(true);setUsername(username);localStorage.setItem(\"Username\",username);alert(\"You are logged in as \".concat(username));setPasswordConfirmation(\"\");history.push(\"/\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchApi(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-style-8\",onSubmit:confirmPasswords,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",minLength:\"5\",placeholder:\"Username\",value:username,onChange:function onChange(event){return setUsername(event.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",minLength:\"7\",placeholder:\"Password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password Confirmation\",value:passwordConfirmation,onChange:function onChange(event){return setPasswordConfirmation(event.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"submitRegister\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submitBtn\",children:\"Submit\"})})]})});};export default Register;","map":{"version":3,"sources":["/home/danzan/Grace-Shopper-Art/src/components/Register.js"],"names":["Link","useHistory","useState","registerUser","Register","username","setUsername","password","setPassword","userToken","setUserToken","setLoggedIn","loggedIn","passwordConfirmation","setPasswordConfirmation","history","confirmPasswords","event","preventDefault","alert","fetchApi","data","error","token","localStorage","setItem","push","console","target","value"],"mappings":"wcAAA;AAEA,OAASA,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,YAAT,KAA6B,cAA7B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MASX,IARJC,CAAAA,QAQI,MARJA,QAQI,CAPJC,WAOI,MAPJA,WAOI,CANJC,QAMI,MANJA,QAMI,CALJC,WAKI,MALJA,WAKI,CAJJC,SAII,MAJJA,SAII,CAHJC,YAGI,MAHJA,YAGI,CAFJC,WAEI,MAFJA,WAEI,CADJC,QACI,MADJA,QACI,CAEJ,cAAwDV,QAAQ,CAAC,EAAD,CAAhE,wCAAOW,oBAAP,eAA6BC,uBAA7B,eACA,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEA,GAAMe,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAClCA,KAAK,CAACC,cAAN,GACA,GAAIX,QAAQ,GAAKM,oBAAjB,CAAuC,CACrCM,KAAK,CAAC,wBAAD,CAAL,CACD,CAFD,IAEO,CACLC,QAAQ,CAACH,KAAD,CAAR,CACD,CACF,CAPD,CASA,GAAMG,CAAAA,QAAQ,2FAAG,iBAAOH,KAAP,iIACfA,KAAK,CAACC,cAAN,GADe,sCAGMf,CAAAA,YAAY,CAACE,QAAD,CAAWE,QAAX,CAHlB,QAGPc,IAHO,eAIb,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdH,KAAK,CAAC,wBAAD,CAAL,CACD,CAFD,IAEO,CACCI,KADD,CACSF,IAAI,CAACE,KADd,CAELC,YAAY,CAACC,OAAb,SAA8BF,KAA9B,EACAb,YAAY,CAACa,KAAD,CAAZ,CACAZ,WAAW,CAAC,IAAD,CAAX,CACAL,WAAW,CAACD,QAAD,CAAX,CACAmB,YAAY,CAACC,OAAb,YAAiCpB,QAAjC,EACAc,KAAK,gCAAyBd,QAAzB,EAAL,CACAS,uBAAuB,CAAC,EAAD,CAAvB,CACAC,OAAO,CAACW,IAAR,CAAa,GAAb,EACD,CAhBY,+EAkBbC,OAAO,CAACL,KAAR,cAlBa,oEAAH,kBAARF,CAAAA,QAAQ,6CAAd,CAsBA,mBACE,kCACE,cAAM,SAAS,CAAC,cAAhB,CAA+B,QAAQ,CAAEJ,gBAAzC,wBACE,gCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,GAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,KAAK,CAAEX,QAJT,CAKE,QAAQ,CAAE,kBAACY,KAAD,QAAWX,CAAAA,WAAW,CAACW,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAtB,EALZ,CAME,QAAQ,KANV,EAFF,cAWE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,GAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,KAAK,CAAEtB,QAJT,CAKE,QAAQ,CAAE,kBAACU,KAAD,QAAWT,CAAAA,WAAW,CAACS,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAtB,EALZ,CAME,QAAQ,KANV,EAXF,cAoBE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,uBAFd,CAGE,KAAK,CAAEhB,oBAHT,CAIE,QAAQ,CAAE,kBAACI,KAAD,QAAWH,CAAAA,uBAAuB,CAACG,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAlC,EAJZ,EApBF,cA0BE,YAAK,SAAS,CAAC,gBAAf,uBACE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,WAAhC,oBADF,EA1BF,GADF,EADF,CAuCD,CApFD,CAsFA,cAAezB,CAAAA,QAAf","sourcesContent":["// Joe, Rob\n\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { registerUser } from \"../api/index\";\n\nconst Register = ({\n  username,\n  setUsername,\n  password,\n  setPassword,\n  userToken,\n  setUserToken,\n  setLoggedIn,\n  loggedIn,\n}) => {\n\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\n  const history = useHistory();\n\n  const confirmPasswords = (event) => {\n    event.preventDefault();\n    if (password !== passwordConfirmation) {\n      alert(\"Passwords do not match\");\n    } else {\n      fetchApi(event);\n    }\n  };\n\n  const fetchApi = async (event) => {\n    event.preventDefault();\n    try {\n      const data = await registerUser(username, password);\n      if (data.error) {\n        alert(\"Error Registering User\");\n      } else {\n        const token = data.token;\n        localStorage.setItem(`Token`, token);\n        setUserToken(token);\n        setLoggedIn(true);\n        setUsername(username);\n        localStorage.setItem(`Username`, username);\n        alert(`You are logged in as ${username}`);\n        setPasswordConfirmation(\"\");\n        history.push(\"/\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div>\n      <form className=\"form-style-8\" onSubmit={confirmPasswords}>\n        <h2>Register</h2>\n        <input\n          type=\"text\"\n          minLength=\"5\"\n          placeholder=\"Username\"\n          value={username}\n          onChange={(event) => setUsername(event.target.value)}\n          required\n        />\n\n        <input\n          type=\"password\"\n          minLength=\"7\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n          required\n        />\n\n        <input\n          type=\"password\"\n          placeholder=\"Password Confirmation\"\n          value={passwordConfirmation}\n          onChange={(event) => setPasswordConfirmation(event.target.value)}\n        />\n        <div className=\"submitRegister\">\n          <button type=\"submit\" className=\"submitBtn\">\n            Submit\n          </button>\n          {/* <Link to=\"/Login\" className=\"routeLinks\">\n            Already have an account? Login here\n          </Link> */}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}